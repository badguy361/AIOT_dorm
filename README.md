# AIOT_dorm

利用Django作為後端框架，以及Azure雲端虛擬主機，建立一套伺服器系統，透過網頁視覺化的方式即時呈現當前宿舍之公用浴室、廁所、洗衣機、烘衣機使用情形。
![image](https://user-images.githubusercontent.com/43988698/215307919-6868e861-c04d-4b5a-833d-b24169699bfc.png)

Django為一種框架，以此可連接後端資料庫與前端網頁設計頁面，透過蒐集門扣使用狀況、洗衣機用電情形、烘衣機震動數據，可於後端資料庫中，即時改變當前公共衛浴設備之使用情形，利用該數據改變前端網頁呈現的樣貌，藉此達到即時呈現使用狀況的效果。
透過Azure雲端虛擬主機的運作可使伺服器不間斷的運作，避免本地端伺服器必須長期處於啟動狀態消耗電腦資源。善用微軟提供的雲端主機服務，降低所需伺服器之成本，可節省本計畫預算，並且也符合未來主機雲端化的趨勢。
前端網頁設計加入fetch技術，可使前端網頁即時抓取後端資料庫數據，使用者不必不斷重新整理即可獲得最新資訊。本計畫以5秒為重新抓取一次數據的時間，以此可達到即時更新且較不消耗電腦運算之源的效果。

![image](https://user-images.githubusercontent.com/43988698/215307878-c3711877-f2cc-4121-9599-301aba6c9748.png)

圖一 系統架構圖

![image](https://user-images.githubusercontent.com/43988698/215307897-328ebbda-5419-475d-b3a6-c9d3ace1c540.png)

圖二 網頁設計成果


浴室、廁所監測其即時使用狀況，在浴室及廁所的門扣上安裝磁鐵，當其鎖上時會碰觸到lora連出去的磁片，使磁片相吸通路形成，進而使電流流通，觀測其電流流通的情形可以判定現在是否有人正在使用該浴室或廁所。
設計方法如圖一所示，在使用者進入浴室或廁所前門扣處在未碰觸lora的狀態，因此lora中電流不會流通，此時會判定未使用狀態。然而當使用者進入浴室或廁所後會將門口鎖上，如圖二所示，鎖上時磁鐵會碰觸到lora，使其磁片相吸，通路形成，電流即可流通，將此資訊回傳，即可得知目前正在使用。
資料傳輸採用樹梅派傳輸資訊，將lora得到資訊傳遞給接在樹梅派上之lora(圖三中黃色彈簧的配置)，再透過樹梅派將該資訊發送給伺服器，並展示於網頁上，此即可建立即時監測系統，確認當前是否有人使用浴室或廁所。
然該方法每間浴室和廁所都需要lora、電池、防水殼、磁鐵，每層樓都需要lora、樹梅派、路由器、網路線。以該些材料作為預算之估算。

![image](https://user-images.githubusercontent.com/43988698/215307830-574e5aa3-3f37-43ef-9f5f-b640d5679e54.png)

圖三 上鎖前門扣

![image](https://user-images.githubusercontent.com/43988698/215307845-509e6fd9-49ff-46ba-9666-fd2c2cf37774.png)

圖四 上鎖後門扣

![image](https://user-images.githubusercontent.com/43988698/215307867-08c19b80-7583-4cb9-924f-f2d0ca61c012.png)

圖五 樹梅派用以傳遞資訊



 
